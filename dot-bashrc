# If not running interactively, don't do anything
[[ $- != *i* ]] && return

# Make history ignore lines starting with space.
HISTCONTROL=ignorespace

# Append to the history file, don't overwrite it
shopt -s histappend

# History size options
HISTSIZE=1000
HISTFILESIZE=10000

# Disable annoying bell
bind 'set bell-style none'

# Make completion behave a bit nicer
bind 'set show-all-if-ambiguous on'
bind 'set page-completions off'
bind "set menu-complete-display-prefix on"
bind 'TAB:menu-complete'
bind '"\e[Z": menu-complete-backward'

# Cycle through history based on characters already typed on the line
bind '"\e[A":history-search-backward'
bind '"\e[B":history-search-forward'

# Keep Ctrl-Left and Ctrl-Right working when the above are used
bind '"\e[1;5C":forward-word'
bind '"\e[1;5D":backward-word'

# Aliases
if command -v bat 2>&1 > /dev/null; then
    alias cat='bat --style=plain'
fi

alias ls='ls --color=auto'
alias ll='ls -l --color=auto'
alias la='ls -la --color=auto'

if command -v eza 2>&1 > /dev/null; then
    alias x='eza --icons=auto'
    alias xa='eza -a --icons=auto'
    alias xl='eza -l --icons=auto'
    alias xla='eza -la --icons=auto'
    alias xt='eza -T --icons=auto'
    alias xta='eza -Ta --icons=auto'
fi

alias lg='lazygit'
alias nv='nvim'

# Function to create directory and CD to it
function mkcd {
    mkdir -p "$1" && cd "$1"
}

# Carapace completion
export CARAPACE_BRIDGES='zsh,fish,bash,inshellisense'
source <(carapace _carapace)

# Load Starship prompt
eval "$(starship init bash)"

# Load Zoxide
if command -v zoxide 2>&1 > /dev/null; then
    eval "$(zoxide init bash)"
fi

# Load direnv
if command -v direnv 2>&1 > /dev/null; then
    eval "$(direnv hook bash)"
fi
